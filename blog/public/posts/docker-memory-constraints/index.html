<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>If I Only Had More Memory :: /* Commentary */</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="When deploying a service to a cluster of hosts, it&amp;rsquo;s important to ensure that the host ultimately chosen can accommodate for the resource requirements of that service. Without first confirming that the host can provide what the service needs, it&amp;rsquo;s possible that the service will consume all available resources and result in degradation of the host itself.
Memory Constraints One such resource to keep tabs on is memory (RAM). Each process that is ran within a particular container will consume some amount of memory while it is running." />
<meta name="keywords" content="docker, swarm, memory, constraint" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/docker-memory-constraints/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-BMCHLBV6TC"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BMCHLBV6TC', { 'anonymize_ip': false });
}
</script>



<link rel="stylesheet" href="/assets/style.css">






<link rel="apple-touch-icon" href="/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="If I Only Had More Memory">
<meta property="og:description" content="When deploying a service to a cluster of hosts, it&amp;rsquo;s important to ensure that the host ultimately chosen can accommodate for the resource requirements of that service. Without first confirming that the host can provide what the service needs, it&amp;rsquo;s possible that the service will consume all available resources and result in degradation of the host itself.
Memory Constraints One such resource to keep tabs on is memory (RAM). Each process that is ran within a particular container will consume some amount of memory while it is running." />
<meta property="og:url" content="/posts/docker-memory-constraints/" />
<meta property="og:site_name" content="/* Commentary */" />

  <meta property="og:image" content="/">

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2022-08-12 14:01:08 -0700 PDT" />












</head>
<body class="orange">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    /* Commentary */
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about/">About</a></li>
        
      
        
          <li><a href="/powered-by/">Powered By</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about/">About</a></li>
      
    
      
        <li><a href="/powered-by/">Powered By</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/docker-memory-constraints/">If I Only Had More Memory</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2022-08-12
        
          [Updated: 2022-08-12]
        
      </span>
    
    
      <span class="post-author">:: fr33r</span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/docker/">docker</a>&nbsp;
    
    #<a href="/tags/swarm/">swarm</a>&nbsp;
    
    #<a href="/tags/devops/">devops</a>&nbsp;
    
  </span>
  
  


  

  <div class="post-content"><div>
        <p>When deploying a service to a cluster of hosts, it&rsquo;s important to ensure that
the host ultimately chosen can accommodate for the resource requirements of
that service. Without first confirming that the host can provide what the
service needs, it&rsquo;s possible that the service will consume all available
resources and result in degradation of the host itself.</p>
<h1 id="memory-constraints">Memory Constraints<a href="#memory-constraints" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>One such resource to keep tabs on is memory (RAM). Each process that is ran
within a particular container will consume some amount of memory while it is
running.</p>
<p>By default, Docker does not apply resource constraints to containers that
ultimately comprise a service. That said</p>
<h1 id="how">How<a href="#how" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<h1 id="reaching-the-limit">Reaching the Limit<a href="#reaching-the-limit" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>So what happens once the limit is reach</p>
<p>what are docker memory constraints?
why should you use them?
how do i determine the memory limit or reservation?```
what is OOM and how to detect it?
what&rsquo;s the deal with swap? should you disable it?
link to articles that could be helpful:</p>
<ul>
<li><a href="https://github.com/kubernetes/kubernetes/issues/53533">https://github.com/kubernetes/kubernetes/issues/53533</a></li>
<li><a href="https://haydenjames.io/linux-performance-almost-always-add-swap-space/">https://haydenjames.io/linux-performance-almost-always-add-swap-space/</a></li>
<li><a href="https://docs.docker.com/config/containers/resource_constraints/#prevent-a-container-from-using-swap">https://docs.docker.com/config/containers/resource_constraints/#prevent-a-container-from-using-swap</a></li>
<li><a href="https://docs.docker.com/compose/compose-file/deploy/#resources">https://docs.docker.com/compose/compose-file/deploy/#resources</a></li>
<li><a href="https://www.baeldung.com/ops/docker-memory-limit#:~:text=Versions%203%20and%20Newer%20With,and%20128%20megabytes%20of%20memory.&amp;text=To%20take%20advantage%20of%20the,use%20the%20docker%20stack%20command">https://www.baeldung.com/ops/docker-memory-limit#:~:text=Versions%203%20and%20Newer%20With,and%20128%20megabytes%20of%20memory.&amp;text=To%20take%20advantage%20of%20the,use%20the%20docker%20stack%20command</a>.</li>
<li><a href="https://docs.docker.com/engine/install/linux-postinstall/">https://docs.docker.com/engine/install/linux-postinstall/</a></li>
<li><a href="https://forums.docker.com/t/docker-swarm-not-respecting-memory-limit/59519">https://forums.docker.com/t/docker-swarm-not-respecting-memory-limit/59519</a></li>
<li><a href="https://semaphoreci.com/community/tutorials/scheduling-services-on-a-docker-swarm-mode-cluster">https://semaphoreci.com/community/tutorials/scheduling-services-on-a-docker-swarm-mode-cluster</a></li>
</ul>
<p>vader@devastator:~ $ sudo docker container inspect 6fd463496083 &ndash;format &lsquo;{{.State.OOMKilled}}&rsquo;
false</p>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">Read other posts</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="/posts/portainer-console-issue/">
                <span class="button__icon">←</span>
                <span class="button__text">You Had One Job Portainer Console!</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="/posts/github-environments-and-secrets/">
                <span class="button__text">Tale of the Unknown GitHub Secrets</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  
  <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "blog-fr33r-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2023 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>







  
</div>

</body>
</html>
